<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  controllerName="agenda.controller.Events">
  <Page title="Maintain Events" showNavButton="true" navButtonPress="onNavBack">
    <content>
      <SplitApp id="eventsSplitApp" mode="ShowHideMode">
        <masterPages>
          <Page title="Events">
            <subHeader>
              <OverflowToolbar>
                <SearchField id="eventSearchField" width="100%" liveChange="onFilterEvents" placeholder="Filter events"/>
                <ToolbarSpacer/>
                <Button id="addEventButton" text="Add" type="Emphasized" press="onAddEvent"/>
              </OverflowToolbar>
            </subHeader>
            <content>
              <List
                id="eventsList"
                mode="SingleSelectMaster"
                selectionChange="onEventSelect"
                items="{/events}">
                <StandardListItem title="{title}" description="{= ${date} + '  ' + ${startTime} + ' - ' + ${endTime} }" type="Active"/>
              </List>
            </content>
          </Page>
        </masterPages>
        <detailPages>
          <Page title="Event Details">
            <content>
              <VBox class="sapUiResponsiveContentPadding" renderType="Bare">
                <Label text="ID"/>
                <Input id="eventIdInput" value="{/selectedEvent/ID}" editable="false"/>

                <Label text="Title" class="sapUiSmallMarginTop"/>
                <Input id="eventTitleInput" value="{/selectedEvent/title}" enabled="{= ${/selectedEvent} !== null }"/>

                <Label text="Date" class="sapUiSmallMarginTop"/>
                <DatePicker
                  id="eventDateInput"
                  value="{/selectedEvent/date}"
                  valueFormat="yyyy-MM-dd"
                  displayFormat="medium"
                  enabled="{= ${/selectedEvent} !== null }"/>

                <Label text="Start Time" class="sapUiSmallMarginTop"/>
                <TimePicker
                  id="eventStartTimeInput"
                  value="{/selectedEvent/startTime}"
                  valueFormat="HH:mm:ss"
                  displayFormat="HH:mm"
                  enabled="{= ${/selectedEvent} !== null }"/>

                <Label text="End Time" class="sapUiSmallMarginTop"/>
                <TimePicker
                  id="eventEndTimeInput"
                  value="{/selectedEvent/endTime}"
                  valueFormat="HH:mm:ss"
                  displayFormat="HH:mm"
                  enabled="{= ${/selectedEvent} !== null }"/>

                <Label text="Group" class="sapUiSmallMarginTop"/>
                <Select id="eventGroupSelect" selectedKey="{/selectedEvent/group_ID_ID}" enabled="{= ${/selectedEvent} !== null }" items="{/groups}">
                  <core:Item xmlns:core="sap.ui.core" key="{ID}" text="{name}"/>
                </Select>

                <Label text="Location ID (optional)" class="sapUiSmallMarginTop"/>
                <Input id="eventLocationInput" value="{/selectedEvent/location_ID_ID}" enabled="{= ${/selectedEvent} !== null }"/>

                <Label text="Person ID (optional)" class="sapUiSmallMarginTop"/>
                <Input id="eventPersonInput" value="{/selectedEvent/person_ID_ID}" enabled="{= ${/selectedEvent} !== null }"/>
              </VBox>
            </content>
            <footer>
              <OverflowToolbar>
                <ToolbarSpacer/>
                <Button id="deleteEventButton" text="Delete" type="Negative" press="onDeleteEvent" enabled="{= ${/selectedEvent} !== null }"/>
                <Button id="saveEventButton" text="Save Changes" type="Emphasized" press="onSaveEvent" enabled="{= ${/selectedEvent} !== null }"/>
              </OverflowToolbar>
            </footer>
          </Page>
        </detailPages>
      </SplitApp>
    </content>
  </Page>
</mvc:View>
